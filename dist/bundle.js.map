{"version":3,"sources":["webpack:///webpack/bootstrap 392d6b0ce751576b977e","webpack:///./src/index.js","webpack:///./src/views/App.js","webpack:///./src/api/flickrAPI.js","webpack:///./src/lib/getURLWithParameters.js","webpack:///./src/api/flickrSearchAPI.js","webpack:///./src/api/flickrSearchAPIAdapter.js","webpack:///./src/views/SearchForm.js","webpack:///./src/lib/throttle.js"],"names":["init","container","document","querySelector","readyState","handleReady","removeEventListener","addEventListener","FLICKR_API_KEY","App","_subViews","_setupAPIClients","_setupSubViews","flickrAPIClient","_flickrSearchAPIClient","extras","searchFormView","placeholderText","submitText","onSearch","_handleSearch","bind","appendChild","getElement","push","text","then","response","console","log","forEach","subView","destroy","FLICKR_REST_URL","APIKey","method","options","requestParams","api_key","format","nojsoncallback","requestURL","fetch","ok","Error","status","json","responseJSON","stat","message","baseURL","params","keys","Object","length","queryString","map","key","value","undefined","encodeURIComponent","filter","Boolean","join","perRequestOptions","APIResponse","photos","photo","title","thumbnailURL","url_n","fullURL","url_c","thumbnailHeight","height_n","thumbnailWidth","width_n","fullHeight","height_c","fullWidth","width_c","SearchForm","_setupElements","_setupListeners","form","createElement","_elements","classList","add","innerHTML","input","submitBtn","_inputEventHandler","_handleValueChange","_submitEventHandler","event","_handleSubmit","disabled","target","preventDefault","stopPropagation","remove","_destroyListeners","fn","timeWindow","context","lastCallTime","pendingCall","args","now","Date","fnContext","nextCallTime","clearTimeout","setTimeout","apply"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 392d6b0ce751576b977e","import App from './views/App';\n\nconst init = () => {\n  new App({container: document.querySelector('.app')});\n};\n\nif (document.readyState !== 'loading') {\n  init();\n} else {\n  const handleReady = () => {\n    document.removeEventListener('DOMContentLoaded', handleReady);\n    init();\n  };\n  document.addEventListener('DOMContentLoaded', handleReady);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import flickrAPI from '../api/flickrAPI';\nimport flickrSearchAPI from '../api/flickrSearchAPI';\n\nimport SearchForm from './SearchForm';\n\nconst FLICKR_API_KEY = 'ed4a2d49acb1d0d7c73bb8aeacc3a82c';\n\nexport default class App {\n  constructor({container}) {\n    this._subViews = [];\n\n    this._setupAPIClients();\n    this._setupSubViews(container);\n  }\n\n  _setupAPIClients() {\n    const flickrAPIClient = flickrAPI(FLICKR_API_KEY);\n\n    this._flickrSearchAPIClient = flickrSearchAPI(flickrAPIClient, {\n      // Ask the API to return fully constructed URLs for a couple of different\n      // image sizes. We could construct the URLs on the client, but pushing\n      // this work to the server has no noticeable performance downside and\n      // removes some complexity from the client code.\n      extras: 'url_n,url_c'\n    });\n  }\n\n  _setupSubViews(container) {\n    const searchFormView = new SearchForm({\n      placeholderText: 'Try: San Francisco, New York, London',\n      submitText: 'Search',\n      onSearch: this._handleSearch.bind(this)\n    });\n\n    container.appendChild(searchFormView.getElement());\n    this._subViews.push(searchFormView);\n  }\n\n  _handleSearch(text) {\n    this._flickrSearchAPIClient(text).then((response) => {\n      console.log(response);\n    });\n  }\n\n  destroy() {\n    this._subViews.forEach((subView) => subView.destroy());\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/App.js","import getURLWithParameters from '../lib/getURLWithParameters';\n\nconst FLICKR_REST_URL = 'https://api.flickr.com/services/rest';\n\nexport default (APIKey) => {\n  return (method, options) => {\n    const requestParams = {\n      api_key: APIKey,\n      format: 'json',\n      nojsoncallback: '1',\n      method,\n      ...options\n    };\n\n    const requestURL = getURLWithParameters(FLICKR_REST_URL, requestParams);\n\n    return fetch(requestURL)\n      .then((response) => {\n        // Trigger rejection on HTTP failure codes, since fetch() will always\n        // resolve except in cases of network failure.\n        if (!response.ok) {\n          throw new Error(`API request failed with code ${response.status}`);\n        }\n        return response.json();\n      }).then((responseJSON) => {\n        // Flickr's API has its own way of representing errors rather than\n        // using HTTP status codes.\n        if (responseJSON.stat !== 'ok') {\n          throw new Error(`API request failed: ${responseJSON.message}`);\n        }\n        return responseJSON;\n      });\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/flickrAPI.js","export default (baseURL, params = {}) => {\n  const keys = Object.keys(params);\n\n  if (keys.length === 0) return baseURL;\n\n  const queryString = keys.map((key) => {\n    const value = params[key];\n\n    if (value === undefined || value === null) return null;\n\n    return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n  }).filter(Boolean).join('&');\n\n  return `${baseURL}?${queryString}`;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/getURLWithParameters.js","import flickrSearchAPIAdapter from './flickrSearchAPIAdapter';\n\nexport default (flickrAPIClient, options) => {\n  return (text, perRequestOptions) => {\n    return flickrAPIClient('flickr.photos.search', {\n      text,\n      ...options,\n      ...perRequestOptions\n    }).then(flickrSearchAPIAdapter);\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/flickrSearchAPI.js","export default (APIResponse) => {\n  return {\n    photos: APIResponse.photos.photo.map((photo) => ({\n      title: photo.title,\n      thumbnailURL: photo.url_n,\n      fullURL: photo.url_c,\n      thumbnailHeight: photo.height_n,\n      thumbnailWidth: photo.width_n,\n      fullHeight: photo.height_c,\n      fullWidth: photo.width_c\n    }))\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/flickrSearchAPIAdapter.js","import throttle from '../lib/throttle';\n\nexport default class SearchForm {\n  constructor({placeholderText, submitText, onSearch}) {\n    this._setupElements(placeholderText, submitText);\n    this._setupListeners(onSearch);\n  }\n\n  _setupElements(placeholderText, submitText) {\n    const form = document.createElement('form');\n    this._elements = {form};\n\n    form.classList.add('search-form');\n    form.innerHTML = `\n      <input class=\"search-input\" type=\"text\" placeholder=\"${placeholderText}\"/>\n      <button class=\"search-submit-btn\" disabled type=\"submit\">${submitText}</button>\n    `;\n\n    this._elements.input = form.querySelector('.search-input');\n    this._elements.submitBtn = form.querySelector('.search-submit-btn');\n  }\n\n  _setupListeners(onSearch) {\n    this._inputEventHandler = throttle(this._handleValueChange, 250, this);\n    this._elements.input.addEventListener('input', this._inputEventHandler);\n\n    this._submitEventHandler = (event) => this._handleSubmit(onSearch, event);\n    this._elements.form.addEventListener('submit', this._submitEventHandler);\n  }\n\n  _destroyListeners() {\n    this._elements.input.removeEventListener('input', this._inputEventHandler);\n    this._elements.form.removeEventListener('submit', this._submitEventHandler);\n  }\n\n  _handleValueChange(event) {\n    this._elements.submitBtn.disabled = event.target.value.length === 0;\n  }\n\n  _handleSubmit(onSearch, event) {\n    event.preventDefault();\n    event.stopPropagation();\n    \n    const {input} = this._elements;\n\n    if (input.value.length === 0) return;\n\n    onSearch(input.value);\n  }\n\n  getElement() {\n    return this._elements.form;\n  }\n\n  destroy() {\n    this._elements.form.remove();\n    this._destroyListeners();\n    this._elements = null;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/SearchForm.js","export default (fn, timeWindow = 300, context) => {\n  let lastCallTime;\n  let pendingCall;\n\n  return function(...args) {\n    const now = +new Date();\n    const fnContext = context || this;\n    const nextCallTime = lastCallTime + timeWindow;\n\n    if (lastCallTime && now < nextCallTime) {\n      clearTimeout(pendingCall);\n      pendingCall = setTimeout(() => {\n        lastCallTime = now;\n        fn.apply(fnContext, args);\n      }, timeWindow);\n    } else {\n      lastCallTime = now;\n      fn.apply(fnContext, args);\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/throttle.js"],"sourceRoot":""}